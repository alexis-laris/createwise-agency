---
import logo from "@/assets/imgs/logo.webp";
import { getTranslations } from "../../i18n/translations";

const t = getTranslations("es");
---

<section
    class="relative bg-[#050505] min-h-screen px-6 overflow-hidden flex items-center py-20"
    id="contacto"
>
    <div class="absolute inset-0 opacity-20">
        <div
            class="absolute top-1/4 left-1/3 w-[600px] h-[600px] bg-[#7E23D9] rounded-full filter blur-[150px]"
        >
        </div>
        <div
            class="absolute bottom-1/4 right-1/3 w-[600px] h-[600px] bg-[#B679F2] rounded-full filter blur-[150px]"
        >
        </div>
    </div>

    <div
        class="absolute inset-0 opacity-25 z-1
    bg-[repeating-linear-gradient(0deg,rgba(255,255,255,0.18)_0px,rgba(255,255,255,0.18)_1px,transparent_1px,transparent_55px),repeating-linear-gradient(90deg,rgba(255,255,255,0.18)_0px,rgba(255,255,255,0.18)_1px,transparent_1px,transparent_55px)]"
    >
    </div>

    <div class="relative max-w-7xl mx-auto z-10 w-full">
        <div class="text-center mb-8">
            <div class="flex justify-center mb-8">
                <div class="relative group">
                    <div
                        class="absolute inset-0 bg-linear-to-r from-[#7E23D9] to-[#B679F2] rounded-2xl blur-xl opacity-50 group-hover:opacity-75 transition-opacity duration-500"
                    >
                    </div>
                </div>
            </div>

            <h2 class="font-extrabold text-white text-3xl md:text-5xl mb-4">
                <span data-i18n="contacto.title">{t.contacto.title}</span>
                <span
                    class="text-transparent bg-clip-text bg-linear-to-r from-[#7E23D9] to-[#B679F2]"
                    data-i18n="contacto.titleHighlight"
                    >{t.contacto.titleHighlight}</span
                >
            </h2>
            <p
                class="text-[#F2F2F2]/80 text-base md:text-lg max-w-3xl mx-auto"
                data-i18n="contacto.subtitle"
            >
                {t.contacto.subtitle}
            </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-stretch">
            <div class="space-y-4 flex flex-col">
                <div
                    class="bg-linear-to-br from-[#48168C]/20 to-transparent border border-[#7E23D9]/30 rounded-3xl p-6 backdrop-blur-sm hover:border-[#B679F2]/60 transition-all duration-500 hover:shadow-[0_20px_60px_rgba(126,35,217,0.3)] flex-1 flex flex-col"
                >
                    <div class="flex justify-center mb-4">
                        <img
                            src={logo.src}
                            alt="Create Wise Logo"
                            class="h-16 md:h-20 w-auto"
                        />
                    </div>
                    <div class="flex items-center gap-3 mb-6">
                        <h3
                            class="text-xl font-bold text-white justify-center flex w-full"
                            data-i18n="contacto.infoSection.title"
                        >
                            {t.contacto.infoSection.title}
                        </h3>
                    </div>

                    <div class="space-y-4">
                        <div
                            class="group flex items-center gap-4 p-4 rounded-2xl bg-[#0a0a0a]/40 border border-[#7E23D9]/20 hover:bg-[#7E23D9]/10 hover:border-[#B679F2]/40 transition-all duration-300"
                        >
                            <div
                                class="w-12 h-12 rounded-xl bg-linear-to-br from-[#7E23D9]/30 to-[#B679F2]/30 flex items-center justify-center border border-[#7E23D9]/40 group-hover:scale-110 group-hover:border-[#B679F2]/60 transition-all duration-300 shrink-0 cursor-pointer"
                            >
                                <svg
                                    class="w-6 h-6 text-[#B679F2]"
                                    fill="none"
                                    stroke="currentColor"
                                    viewBox="0 0 24 24"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                                    ></path>
                                </svg>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p
                                    class="text-[#B679F2] text-xs font-semibold uppercase tracking-wider mb-1"
                                    data-i18n="contacto.infoSection.email.label"
                                >
                                    {t.contacto.infoSection.email.label}
                                </p>
                                <a
                                    href={`mailto:${t.contacto.infoSection.email.value}`}
                                    class="text-white text-sm md:text-base font-bold hover:text-[#B679F2] transition-colors duration-300 block truncate"
                                >
                                    {t.contacto.infoSection.email.value}
                                </a>
                            </div>
                        </div>

                        <div
                            class="group flex items-center gap-4 p-4 rounded-2xl bg-[#0a0a0a]/40 border border-[#7E23D9]/20 hover:bg-[#7E23D9]/10 hover:border-[#B679F2]/40 transition-all duration-300"
                        >
                            <div
                                class="w-12 h-12 rounded-xl bg-linear-to-br from-[#7E23D9]/30 to-[#B679F2]/30 flex items-center justify-center border border-[#7E23D9]/40 group-hover:scale-110 group-hover:border-[#B679F2]/60 transition-all duration-300 shrink-0 cursor-pointer"
                            >
                                <svg
                                    class="w-6 h-6 text-[#B679F2]"
                                    fill="none"
                                    stroke="currentColor"
                                    viewBox="0 0 24 24"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                                    ></path>
                                </svg>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p
                                    class="text-[#B679F2] text-xs font-semibold uppercase tracking-wider mb-1"
                                    data-i18n="contacto.infoSection.phone.label"
                                >
                                    {t.contacto.infoSection.phone.label}
                                </p>
                                <a
                                    href={`tel:${t.contacto.infoSection.phone.value.replace(/\s/g, "")}`}
                                    class="text-white text-sm md:text-base font-bold hover:text-[#B679F2] transition-colors duration-300 block"
                                >
                                    {t.contacto.infoSection.phone.value}
                                </a>
                            </div>
                        </div>

                        <div
                            class="group flex items-center gap-4 p-4 rounded-2xl bg-[#0a0a0a]/40 border border-[#7E23D9]/20 hover:bg-[#7E23D9]/10 hover:border-[#B679F2]/40 transition-all duration-300"
                        >
                            <div
                                class="w-12 h-12 rounded-xl bg-linear-to-br from-[#7E23D9]/30 to-[#B679F2]/30 flex items-center justify-center border border-[#7E23D9]/40 group-hover:scale-110 group-hover:border-[#B679F2]/60 transition-all duration-300 shrink-0 cursor-pointer"
                            >
                                <svg
                                    class="w-6 h-6 text-[#B679F2]"
                                    fill="none"
                                    stroke="currentColor"
                                    viewBox="0 0 24 24"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"
                                    ></path>
                                </svg>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p
                                    class="text-[#B679F2] text-xs font-semibold uppercase tracking-wider mb-1"
                                    data-i18n="contacto.infoSection.reach.label"
                                >
                                    {t.contacto.infoSection.reach.label}
                                </p>
                                <p
                                    class="text-white text-sm md:text-base font-bold"
                                    data-i18n="contacto.infoSection.reach.value"
                                >
                                    {t.contacto.infoSection.reach.value}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div
                class="bg-linear-to-br from-[#48168C]/20 to-transparent border border-[#7E23D9]/30 rounded-3xl p-6 backdrop-blur-sm hover:border-[#B679F2]/60 transition-all duration-500 flex flex-col"
            >
                <h3
                    class="text-xl font-bold text-white mb-4 justify-center flex w-full"
                    data-i18n="contacto.formSection.title"
                >
                    {t.contacto.formSection.title}
                </h3>

                <form class="space-y-4 flex-1 flex flex-col" id="contactForm">
                    <div class="form-group">
                        <label
                            for="name"
                            class="block text-[#F2F2F2]/80 text-sm font-semibold mb-2"
                            data-i18n="contacto.formSection.fields.name.label"
                        >
                            {t.contacto.formSection.fields.name.label}
                        </label>
                        <input
                            type="text"
                            id="nombre"
                            name="name"
                            required
                            class="w-full px-4 py-3 bg-[#0a0a0a]/60 border border-[#7E23D9]/30 rounded-xl text-white placeholder-[#F2F2F2]/40 focus:outline-none focus:border-[#B679F2] focus:ring-2 focus:ring-[#B679F2]/20 transition-all duration-300"
                            placeholder={t.contacto.formSection.fields.name
                                .placeholder}
                            data-i18n-placeholder="contacto.formSection.fields.name.placeholder"
                        />
                    </div>

                    <div class="form-group">
                        <label
                            for="email"
                            class="block text-[#F2F2F2]/80 text-sm font-semibold mb-2"
                            data-i18n="contacto.formSection.fields.email.label"
                        >
                            {t.contacto.formSection.fields.email.label}
                        </label>
                        <input
                            type="email"
                            id="email"
                            name="email"
                            required
                            class="w-full px-4 py-3 bg-[#0a0a0a]/60 border border-[#7E23D9]/30 rounded-xl text-white placeholder-[#F2F2F2]/40 focus:outline-none focus:border-[#B679F2] focus:ring-2 focus:ring-[#B679F2]/20 transition-all duration-300"
                            placeholder={t.contacto.formSection.fields.email
                                .placeholder}
                            data-i18n-placeholder="contacto.formSection.fields.email.placeholder"
                        />
                    </div>

                    <div class="form-group">
                        <label
                            for="message"
                            class="block text-[#F2F2F2]/80 text-sm font-semibold mb-2"
                            data-i18n="contacto.formSection.fields.message.label"
                        >
                            {t.contacto.formSection.fields.message.label}
                        </label>
                        <textarea
                            id="mensaje"
                            name="mensaje"
                            required
                            rows="6"
                            class="w-full px-4 py-3 bg-[#0a0a0a]/60 border border-[#7E23D9]/30 rounded-xl text-white placeholder-[#F2F2F2]/40 focus:outline-none focus:border-[#B679F2] focus:ring-2 focus:ring-[#B679F2]/20 transition-all duration-300 resize-none"
                            placeholder={t.contacto.formSection.fields.message
                                .placeholder}
                            data-i18n-placeholder="contacto.formSection.fields.message.placeholder"
                        ></textarea>
                    </div>

                    <button
                        type="submit"
                        id="submitBtn"
                        class="w-full px-8 py-4 bg-linear-to-r from-[#7E23D9] to-[#B679F2] rounded-xl text-white font-bold text-lg hover:shadow-[0_20px_60px_rgba(126,35,217,0.6)] hover:scale-[1.02] transition-all duration-500 flex items-center justify-center gap-3 group cursor-pointer"
                    >
                        <span data-i18n="contacto.formSection.submitButton"
                            >{t.contacto.formSection.submitButton}</span
                        >
                        <svg
                            class="w-5 h-5 group-hover:translate-x-1 transition-transform duration-300"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                        </svg>
                    </button>
                    <p id="formMessage" class="text-center text-xs mt-2"></p>
                </form>
            </div>
        </div>
    </div>
</section>

<style>
    select {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23B679F2'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 0.75rem center;
        background-size: 1.5em 1.5em;
        appearance: none;
    }

    select option {
        background-color: #0a0a0a;
        color: white;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
        box-shadow: 0 0 0 3px rgba(126, 35, 217, 0.1);
    }
</style>

<script>
    const form = document.getElementById("contactForm") as HTMLFormElement;
    const msg = document.getElementById("formMessage") as HTMLParagraphElement;
    const btn = document.getElementById("submitBtn") as HTMLButtonElement;

    form.addEventListener("submit", async (e) => {
        e.preventDefault();

        btn.disabled = true;
        btn.textContent = "Enviando...";
        btn.classList.add("opacity-60");
        msg.textContent = "";

        const formData = new FormData(form);

        const response = await fetch("/api/contact", {
            method: "POST",
            body: formData,
        });

        const result = await response.json();

        if (response.ok) {
            msg.textContent = "✔ Tu mensaje ha sido enviado con éxito.";
            msg.className = "text-center text-xs mt-2 text-[#05F2AF]";
            form.reset();
        } else {
            msg.textContent = "❌ Ocurrió un error, intenta más tarde.";
            msg.className = "text-center text-xs mt-2 text-red-500";
        }

        btn.disabled = false;
        btn.textContent = "Enviar Mensaje";
        btn.classList.remove("opacity-60");
    });
</script>
